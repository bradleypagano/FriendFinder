<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous">
        </script>
    <title>Survey Page</title>
</head>

<body>
    <div class="container">
        <form>
            <div class="form-group">
                <label>Your Name</label>
                <input id="myName" type="text" class="form-control" placeholder="Your Name Here" />
            </div>
            <div class="form-group">
                <label>Upload a Picture!</label>
                <input id="myPic" type="file" class="form-control-file">
                <small class="form-text text-muted">Pick a good one!</small>
            </div>
            <div class="text-center">
                <P>Please take our short survery. Each Questions is on a scale of 1 to 5.</P>
            </div>
            <div class="form-row">
                <label>Do you need alcohol to have a good time?</label>
                <select id="menu1" class="custom-select">
                    <option selected>Select One...</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                    <option value="4">Four</option>
                    <option value="5">Five</option>
                </select>
            </div>
            <div class="form-row">
                <label>Do you watch a lot of television?</label>
                <select id="menu2" class="custom-select">
                    <option selected>Select One...</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                    <option value="4">Four</option>
                    <option value="5">Five</option>
                </select>
            </div>
            <div class="form-row">
                <label>How many cars do you own?</label>
                <select id="menu3" class="custom-select">
                    <option selected>Select One...</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                    <option value="4">Four</option>
                    <option value="5">Five</option>
                </select>
            </div>
            <div class="form-row">
                <label>How many board games do you play in a week?</label>
                <select id="menu4" class="custom-select">
                    <option selected>Select One...</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                    <option value="4">Four</option>
                    <option value="5">Five</option>
                </select>
            </div>
            <div class="form-row">
                <label>How important are your friends to you?</label>
                <select id="menu5" class="custom-select">
                    <option selected>Select One...</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                    <option value="4">Four</option>
                    <option value="5">Five</option>
                </select>
            </div>
            <div class="form-row">
                <label>Do you care about religion? 1 not at all, 5 absolutely</label>
                <select id="menu6" class="custom-select">
                    <option selected>Select One...</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                    <option value="4">Four</option>
                    <option value="5">Five</option>
                </select>
            </div>
            <div class="form-row">
                <label>Dogs are way better than cats</label>
                <select id="menu7" class="custom-select">
                    <option selected>Select One...</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                    <option value="4">Four</option>
                    <option value="5">Five</option>
                </select>
            </div>
            <div class="form-row">
                <label>Do you watch all the sports?</label>
                <select id="menu8" class="custom-select">
                    <option selected>Select One...</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                    <option value="4">Four</option>
                    <option value="5">Five</option>
                </select>
            </div>
            <div class="form-row">
                <label>Are you a Lewis Hamilton fan?</label>
                <select id="menu9" class="custom-select">
                    <option selected>Select One...</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                    <option value="4">Four</option>
                    <option value="5">Five</option>
                </select>
            </div>
            <div class="form-row">
                <label>Do you agree that Fernando Alonso was poison to McClaren?</label>
                <select id="menu10" class="custom-select">
                    <option selected>Select One...</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                    <option value="4">Four</option>
                    <option value="5">Five</option>
                </select>
            </div>
            <div class="row">
                <button id="find" type="submit" data-toggle="modal" data-target="#theModal" class="btn btn-primary">Find Friends</button>
            </div>
        </form>
    </div>
    <div id="theModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3 class="modal-title">We Found You a Super Friend!</h3>
                </div>
                <div class="modal-body">
                    <div id="emptyDiv">
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>

<script type="text/javascript">

$("#find").on("click", function(event){
    event.preventDefault();

    const newFriend = {
        name: $("#myName").val().trim(),
        photo:$("#myPic"),
        scores:[
            parseInt($("#menu1 option:selected").val()),
            parseInt($("#menu2 option:selected").val()),
            parseInt($("#menu3 option:selected").val()),
            parseInt($("#menu4 option:selected").val()),
            parseInt($("#menu5 option:selected").val()),
            parseInt($("#menu6 option:selected").val()),
            parseInt($("#menu7 option:selected").val()),
            parseInt($("#menu8 option:selected").val()),
            parseInt($("#menu9 option:selected").val()),
            parseInt($("#menu10 option:selected").val())
        ] 
    };

    console.log(newFriend);

    $.post("/api/friends", newFriend, function(data){
        $("#myName").val("");
        $("#myPic").val("");
    });

})

</script>